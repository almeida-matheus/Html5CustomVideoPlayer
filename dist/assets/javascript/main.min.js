!function(){"use strict";function e(e){this.init(e)}var t="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink";e.prototype.init=function(e){var t=document.querySelectorAll(e);if(!(t.length<1))for(var n=0;n<t.length;n++)this.build(t[n])},e.prototype.build=function(e){this.root=e,this.buildComponentsContent().buildControlsButtons().buildProgressBar().buildTime().buildVolumeButton().buildFunctionButtons().createEvents()},e.prototype.buildComponentsContent=function(){return this.controlsContent=document.createElement("div"),this.controlsContent.className="controls-content",this.componentsContentLeft=document.createElement("div"),this.componentsContentLeft.className="components-content",this.componentsContentRight=document.createElement("div"),this.componentsContentRight.className="components-content",this.progressBarContentCenter=document.createElement("div"),this.progressBarContentCenter.className="progressbar-content",this.controlsContent.appendChild(this.componentsContentLeft),this.controlsContent.appendChild(this.progressBarContentCenter),this.controlsContent.appendChild(this.componentsContentRight),this.root.appendChild(this.controlsContent),this},e.prototype.buildControlsButtons=function(){return this.playIconSpan=document.createElement("span"),this.playIconSpan.className="icon icon-play",this.playIconSpan.setAttribute("tabindex","1"),this.playIconSVG=document.createElementNS(t,"svg"),this.playIconUse=document.createElementNS(t,"use"),this.playIconUse.setAttributeNS(n,"xlink:href","#play"),this.reloadIconSpan=document.createElement("span"),this.reloadIconSpan.className="icon icon-reload",this.reloadIconSVG=document.createElementNS(t,"svg"),this.reloadIconUse=document.createElementNS(t,"use"),this.reloadIconUse.setAttributeNS(n,"xlink:href","#reload"),this.reloadIconSVG.appendChild(this.reloadIconUse),this.reloadIconSpan.appendChild(this.reloadIconSVG),this.playIconSVG.appendChild(this.playIconUse),this.playIconSpan.appendChild(this.playIconSVG),this.componentsContentLeft.appendChild(this.playIconSpan),this.componentsContentLeft.appendChild(this.reloadIconSpan),this},e.prototype.buildProgressBar=function(){return this.progressBarFull=document.createElement("div"),this.progressBarFull.className="progressbar-full",this.bufferedBar=document.createElement("div"),this.bufferedBar.className="bufferedbar",this.progressBar=document.createElement("div"),this.progressBar.className="progressbar",this.progressBarBall=document.createElement("div"),this.progressBarBall.className="progressbar-ball",this.progressBar.appendChild(this.progressBarBall),this.progressBarFull.appendChild(this.bufferedBar),this.progressBarFull.appendChild(this.progressBar),this.progressBarContentCenter.appendChild(this.progressBarFull),this},e.prototype.buildTime=function(){return this.timer=document.createElement("span"),this.timer.className="timer",this.timer.innerHTML="0:00 / 0:00",this.componentsContentRight.appendChild(this.timer),this},e.prototype.buildVolumeButton=function(){return this.volumeButton=document.createElement("div"),this.volumeButton.className="volume-button",this.volumeContent=document.createElement("div"),this.volumeContent.className="volumebar-content",this.volumeFullBar=document.createElement("div"),this.volumeFullBar.className="volumebar-full",this.volumeBarLevel=document.createElement("div"),this.volumeBarLevel.className="volumebar-level",this.volumeBarClickable=document.createElement("div"),this.volumeBarClickable.className="volumebar-clickable",this.volumeBarBall=document.createElement("div"),this.volumeBarBall.className="volumebar-ball",this.iconVolumeSpan=document.createElement("span"),this.iconVolumeSpan.className="icon icon-volume-high volume-button",this.iconVolumeSVG=document.createElementNS(t,"svg"),this.iconVolumeUse=document.createElementNS(t,"use"),this.iconVolumeUse.setAttributeNS(n,"xlink:href","#volume-high"),this.iconVolumeSVG.appendChild(this.iconVolumeUse),this.iconVolumeSpan.appendChild(this.iconVolumeSVG),this.volumeBarLevel.appendChild(this.volumeBarBall),this.volumeFullBar.appendChild(this.volumeBarLevel),this.volumeFullBar.appendChild(this.volumeBarClickable),this.volumeContent.appendChild(this.volumeFullBar),this.volumeButton.appendChild(this.volumeContent),this.volumeButton.appendChild(this.iconVolumeSpan),this.componentsContentRight.appendChild(this.volumeButton),this},e.prototype.buildFunctionButtons=function(){return this.expandIconSpan=document.createElement("span"),this.expandIconSpan.className="icon icon-expand",this.expandIconSVG=document.createElementNS(t,"svg"),this.expandIconUse=document.createElementNS(t,"use"),this.expandIconUse.setAttributeNS(n,"xlink:href","#expand"),this.hdIconSpan=document.createElement("span"),this.hdIconSpan.className="icon icon-hd",this.hdIconSVG=document.createElementNS(t,"svg"),this.hdIconUse=document.createElementNS(t,"use"),this.hdIconUse.setAttributeNS(n,"xlink:href","#hd"),this.hdIconSVG.appendChild(this.hdIconUse),this.hdIconSpan.appendChild(this.hdIconSVG),this.expandIconSVG.appendChild(this.expandIconUse),this.expandIconSpan.appendChild(this.expandIconSVG),this.componentsContentRight.appendChild(this.hdIconSpan),this.componentsContentRight.appendChild(this.expandIconSpan),this},e.prototype.createEvents=function(){var e=this.root.querySelectorAll("video")[0],t=this.progressBarFull,o=this.progressBar,i=this.bufferedBar,s=(this.hdIconUse,this.timer),l=this.playIconSpan,r=this.volumeBarLevel,a=(this.volumeFullBar,this.progressBarBall),h=this.volumeBarBall,c=!1;return this.playIconSpan.addEventListener("click",function(){e.paused?(this.className="icon icon-pause",this.children[0].children[0].setAttributeNS(n,"xlink:href","#pause"),e.play()):(this.className="icon icon-play",this.children[0].children[0].setAttributeNS(n,"xlink:href","#play"),e.pause())}),this.reloadIconSpan.addEventListener("click",function(){e.currentTime=0}),e.addEventListener("timeupdate",function(){if(e.buffered.length>0){var t=e.currentTime.toFixed(1),r=Math.floor(t/60%60),a=Math.floor(t%60),h=e.duration.toFixed(1),c=Math.floor(h/60%60),d=Math.floor(h%60);10>a&&(a="0"+a),10>d&&(d="0"+d),s.innerHTML=r+":"+a+" / "+c+":"+d,i.style.width=e.buffered.end(e.buffered.length-1)/h*100+"%",o.style.width=t/h*100+"%"}e.ended&&l.children[0].children[0].setAttributeNS(n,"xlink:href","#play")}),e.addEventListener("waiting",function(){console.log("buffering")}),this.expandIconSpan.addEventListener("click",function(){document.webkitIsFullScreen?(document.webkitCancelFullScreen(),this.children[0].children[0].setAttributeNS(n,"xlink:href","#expand")):(e.webkitRequestFullScreen(),this.children[0].children[0].setAttributeNS(n,"xlink:href","#retract"))}),this.progressBarFull.addEventListener("mousedown",function(e){c=!0,o.style.width=e.offsetX/this.offsetWidth*100+"%"}),this.root.addEventListener("mouseup",function(e){c=!1}),this.root.addEventListener("mousemove",function(e){c&&(console.log(e),console.log(t.offsetWidth))}),this.progressBarFull.addEventListener("click",function(t){if(t.toElement!=a){var n=this.offsetWidth,i=t.offsetX,s=(i/n).toFixed(3),l=isNaN(e.duration)?0:e.duration;e.currentTime=(l*s).toFixed(0),o.style.width=i/n*100+"%"}}),this.iconVolumeSpan.addEventListener("click",function(t){e.muted?(e.muted=!1,this.children[0].children[0].setAttributeNS(n,"xlink:href","#volume-high")):(e.muted=!0,this.children[0].children[0].setAttributeNS(n,"xlink:href","#volume-muted"))}),this.progressBarBall.addEventListener("click",function(e){}),this.volumeBarClickable.addEventListener("click",function(t){if(t.toElement!=h){var n=this.offsetHeight,o=t.offsetY,i=((n-o)/n).toFixed(1);i>=0&&1>=i&&(e.volume=i),r.style.height=(n-o)/n*100+"%"}}),this},new e(".video-player")}();